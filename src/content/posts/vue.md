---
title: vue
published: 2026-02-15
description: ''
image: ''
tags: []
category: ''
draft: false 
lang: ''
---

## Vue3 和 Vue2 的区别有哪些？说几个主要的

Vue 3 提供了更现代化、更高性能的架构，通过 `Composition API` 和 `Proxy` 响应式系统等改进提升了开发体验 🎉🎉🎉。相比于 Vue 2，它的优势如下:

<!-- more -->

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">性能优化</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">虚拟 DOM 重构</strong>：Vue3的虚拟DOM采用了更高效的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Diff算法</code>，减少了渲染和更新的开销。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Tree-shaking 支持</strong>：Vue3的代码结构模块化，支持按需引入，减小了打包体积。</p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Composition API</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3引入了Composition API，使代码更模块化、复用性更强。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup()</code><span>&nbsp;</span>方法代替了部分选项式 API，通过函数的方式组织逻辑，代码更加清晰简洁。</p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">响应式系统改进</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Vue3使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>实现响应式，解决了 Vue2使用Object.defineProperty实现响应式的一些局限性，如无法监听新增属性和数组索引变化。</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">新特性和改进</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Teleport</strong>：可以将组件的DOM渲染到指定的DOM节点之外，例如模态框、通知等。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Fragment 支持</strong>：Vue3支持组件返回多个根节点，不再需要单一根节点。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3原生支持<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code>，提供更完善的类型推导和开发体验。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3支持为一个组件绑定多个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code>，并且可以自定义<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">prop</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">event</code><span>&nbsp;</span>名称。</p></li></ul></details>

## 🔥Vue 组件的通讯方式有哪些？

组件之间的通讯通常分为父子组件通讯和跨组件通讯。要注意，vue3 组件的通讯方式和 vue2 有一定的区别。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">父子组件通信</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Props：父组件通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">props</code><span>&nbsp;</span>向子组件传递数据。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">$emit：子组件通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">$emit</code><span>&nbsp;</span>向父组件发送事件，并可以传递数据。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">获取组件实例对象，调用属性或方法： 💡 Vue 2：通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$parent</code><span>&nbsp;</span>获取父组件实例，或通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$children</code><span>&nbsp;</span>获取子组件实例。 💡 Vue 3：通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>引用子组件，直接访问其属性和方法。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">Vue 3 组件支持多个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>绑定和自定义属性名，父子之间的双向绑定更加灵活。</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">跨组件通信</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Provide / Inject：父组件通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">provide</code><span>&nbsp;</span>向后代组件传递数据，后代组件使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">inject</code><span>&nbsp;</span>接收数据，适用于深层嵌套组件间的通信。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">vuex：通过全局状态管理库 Vuex 共享状态，实现跨组件通信（vue2）。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">pinia：Pinia 是 Vue 3 推荐的全局状态管理库，替代了 Vuex。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">事件总线（Vue 2）：Vue 2 中可以通过<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Event Bus</code>实现组件间的通信，但在 Vue 3 中不推荐使用。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">全局事件处理器：通过在根组件$root或全局对象上监听事件，进行跨组件通信（Vue 3 推荐使用外部库，如<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mitt</code>）。</li></ul></details>

## Vue 组件的生命周期

Vue 组件的生命周期是指组件从创建到销毁的整个过程，包括组件的初始化、渲染、更新和销毁等阶段。在Vue2和Vue3中，组件的生命周期有一些区别。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">创建阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeCreate</strong>：组件实例刚被创建，数据观测和事件/监听器设置之前。此时无法访问<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">data</code><span>&nbsp;</span>、<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">methods</code><span>&nbsp;</span>等。 2️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">created</strong>：组件实例已创建，数据观测、事件/监听器设置完成，此时可以访问<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">data</code><span>&nbsp;</span>、<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">methods</code><span>&nbsp;</span>等，通常用于数据初始化。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">挂载阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeMount</strong>：在挂载开始之前，模板已编译，<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">el</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">template</code><span>&nbsp;</span>已经确定，但尚未渲染。 4️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">mounted</strong>：组件实例挂载到 DOM 上之后，此时可以访问和操作 DOM。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">更新阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">5️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeUpdate</strong>：数据发生变化，DOM 尚未更新。可以在这里做一些数据处理，避免不必要的渲染。 6️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">updated</strong>：数据变化，DOM 更新后调用。此时组件的 DOM 已经更新，可以访问和操作新的 DOM。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">销毁阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">7️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeDestroy</strong>：组件实例销毁之前。可以在此阶段进行清理工作，例如移除事件监听器、定时器等。 8️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">destroyed</strong>：组件实例销毁之后。此时，所有的事件监听器和子组件已被销毁。</p></details>

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">创建阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeMount</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>，在组件挂载之前调用。 2️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onMounted</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><span>&nbsp;</span>，在组件挂载之后调用。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">更新阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeUpdate</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>，在数据更新之前调用。 4️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onUpdated</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><span>&nbsp;</span>，在数据更新并渲染之后调用。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">销毁阶段</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">5️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeUnmount</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>，在组件卸载前调用。 6️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onUnmounted</strong>：等效于 Vue 2 中的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><span>&nbsp;</span>，在组件卸载后调用。</p></details>

setup与生命周期

setup 作为 Vue3 的 Composition API 的一部分, 其内部函数的执行时机早于Mounted钩子。



```
<script setup>
  import { ref, onMounted } from 'vue';
  console.log("setup");
  onMounted(() => {
  console.log('onMounted');
  });
  // 执行结果:setup onMounted
</script>
```

## Vue 组件在哪个生命周期发送 ajax 请求？

在 Vue中，接口请求一般放在 `created` 或 `mounted` 生命周期钩子中。

<details class="details custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong><strong style="box-sizing: border-box; font-weight: 600;"></strong></p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"></p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong><strong style="box-sizing: border-box; font-weight: 600;"></strong><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;"></code></p></li></ul></details>

## Vue 父子组件生命周期调用顺序

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1️⃣ 创建阶段</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>➡️<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">子组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>➡️<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">顺序： 父组件的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code><span>&nbsp;</span>先执行 ，子组件的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code><span>&nbsp;</span>后执行。<blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">原因：父组件需要先完成自身的初始化（如 data、computed 等），才能解析模板中的子组件并触发子组件的初始化。</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">2️⃣ 挂载阶段</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">子组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>➡️<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">顺序： 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><span>&nbsp;</span>→ 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">原因：父组件在挂载前（beforeMount）需要先完成子组件的渲染和挂载，因为子组件是父组件模板的一部分。只有当所有子组件挂载完成后，父组件才会触发自身的 mounted。</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3️⃣ 更新阶段</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">子组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>➡️<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">顺序： 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><span>&nbsp;</span>→ 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">原因：父组件的数据变化会触发自身更新流程，但子组件的更新必须在父组件更新前完成（因为子组件可能依赖父组件的数据），最终父组件的视图更新完成。</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">4️⃣ 销毁阶段</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">子组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>➡️<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">父组件：<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">顺序： 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>→ 子<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><span>&nbsp;</span>→ 父<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">原因：父组件销毁前需要先销毁所有子组件，确保子组件的资源释放和事件解绑，避免内存泄漏。</p></blockquote></li></ul><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">TIP</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">注：vue3中，<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup()</code><span>&nbsp;</span>替代了<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code>，但父子组件的生命周期顺序不变。</p></div></details>

## 🔥v-show 和 v-if 的区别

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">渲染方式：</strong><span>&nbsp;</span>💡v-if：条件为 true 时才会渲染元素，条件为 false 时销毁元素。 💡v-show：始终渲染元素，只是通过 CSS 控制<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">display 属性</code>来显示或隐藏。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><strong style="box-sizing: border-box; font-weight: 600;">适用场景：</strong><span>&nbsp;</span>💡v-if：适用于条件变化不频繁的场景。 💡v-show：适用于条件变化频繁的场景。</li></ul></details>

## 为何v-if和v-for不能一起使用？

`v-if` 和 `v-for` 不能直接一起使用的原因，主要是因为它们在 **解析优先级** 和 **逻辑处理** 上存在冲突。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">由于<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>的解析优先级高于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code>，同时使用 v-if 和 v-for，Vue 首先会循环创建所有dom元素，然后根据条件来判断是否渲染每个元素，这种方式可能导致 Vue 进行大量的 DOM 操作，性能较差。其次，<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>会为每个循环项创建一个新的作用域，而<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>的条件如果依赖于这个作用域内的数据，可能导致判断逻辑异常。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">为避免上述问题，vue官方推荐我们将<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>放到<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>外层，或者将<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>放置到<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>内部的单个节点上。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"show"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-for</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"item in list"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> :key="item.id"&gt;{{</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> item.name</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> }}&lt;/div&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;">&lt;/div&gt;</span></span></code></pre></div></details>


## computed 和 watch 有什么区别

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">computed</strong>用于计算基于响应式数据的值，并缓存结果:</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;原始值：{{ count }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;计算后的数值：{{ doubledCount }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref, computed } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 计算属性</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> doubledCount</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> computed</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> count.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">watch</strong>用于监听数据变化并执行副作用操作</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;原始数值：{{ count }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"count++"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;增加数值&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref, watch } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 监听器</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(count, (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newVal</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">oldVal</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`数值从 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">oldVal</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">} 变为 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">newVal</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">}`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">特性</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code></th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code></th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">用途</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">用于计算基于响应式数据的值，并缓存结果</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">用于监听数据变化并执行副作用操作</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">返回值</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">返回计算结果</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">不返回值，执行副作用</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">缓存机制</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">只有在访问时才会计算，会缓存计算结果，仅当依赖变化时重新计算</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">数据变化时立即执行回调，不缓存，每次数据变化都会触发回调</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">适用场景</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">计算派生数据，避免不必要的重复计算</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">执行异步操作、处理副作用操作，如 API 请求</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">性能</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">性能较好，避免重复计算</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">每次数据变化时都会执行回调函数</td></tr></tbody></table></details>


## 🔥watch 和 watchEffect 的区别

`watch` 和 `watchEffect` 都是 Vue 3 中用于响应式数据变化时执行副作用的 API，它们的使用场景和工作机制存在区别：

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">依赖追踪方式</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>：需要显式声明依赖，监听指定的数据源；可以监听多个数据源或进行深度监听。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { watch, reactive } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 显式声明监听的依赖</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">oldCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`新值 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">newCount</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">} 老值 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">oldCount</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">}`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>：会自动追踪<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">作用域内所有的响应式依赖</strong>，不需要显式声明依赖。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { watchEffect, reactive } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watchEffect</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`Count 变化了: ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">state</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">count</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">}`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 自动追踪 `state.count`</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">执行时机</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>：在监听的响应式数据变化后立即执行。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>：在<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">组件挂载时</strong><span>&nbsp;</span>执行一次副作用，并在<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">依赖发生变化时</strong><span>&nbsp;</span>再次执行。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">适用场景</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>：适用于<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">监听特定数据</strong><span>&nbsp;</span>变化并执行副作用的场景，如 API 请求、保存操作等。适合需要<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">访问新值和旧值</strong><span>&nbsp;</span>进行比较的场景。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>：不需要访问旧值，适用于<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">自动追踪多个响应式依赖</strong><span>&nbsp;</span>的副作用，如渲染、自动保存等。</p></details>


> Vue官方API： [watchEffect](https://cn.vuejs.org/api/reactivity-core.html#watcheffect)

## 🔥Vue3 ref 和 reactive 如何选择？

`ref` 和 `reactive` 都是 Vue 3 中用来创建响应式数据的 API，他们的区别及使用场景如下。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">reactive的实现：</strong><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>对对象或数组的每个属性进行深度代理，实现响应式。这种设计使得<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>能自动追踪所有嵌套属性的变化，但由于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>无法直接处理基本数据类型（如<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">number</code><span>&nbsp;</span>、<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">string</code><span>&nbsp;</span>、<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">boolean</code><span>&nbsp;</span>），因此，<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>不适用于基本数据类型。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">ref的实现：</strong><span>&nbsp;</span>为了实现基本数据类型的响应式，Vue 设计了<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>。<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>会将基本数据类型封装为一个包含<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">value</code><span>&nbsp;</span>属性的对象，通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">getter</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setter</code><span>&nbsp;</span>实现响应式依赖追踪和更新。当访问或修改<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref.value</code><span>&nbsp;</span>时，Vue 内部会触发依赖更新。此外，对于复杂数据类型（如对象或数组），<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>的内部实现会直接调用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>，将复杂数据类型变为响应式。</p></li></ul><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">如何选择</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Vue官方建议</strong>使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref()</code><span>&nbsp;</span>作为声明响应式状态的主要，因为<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>存在以下局限性：</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡有限的值类型：它只能用于对象类型 (对象、数组和如 Map、Set 这样的集合类型)。它不能持有如 string、number 或 boolean 这样的原始类型。 💡不能替换整个对象：由于 Vue 的响应式跟踪是通过属性访问实现的，因此我们必须始终保持对响应式对象的相同引用。这意味着我们不能轻易地“替换”响应式对象，因为这样的话与第一个引用的响应性连接将丢失：</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgba(60, 60, 67, 0.78); background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">let</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 上面的 ({ count: 0 }) 引用将不再被追踪</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// (响应性连接已丢失！)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">state </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡对解构操作不友好：当我们将响应式对象的原始类型属性解构为本地变量时，或者将该属性传递给函数时，我们将丢失响应性连接</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgba(60, 60, 67, 0.78); background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 当解构时，count 已经与 state.count 断开连接</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">let</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { count } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 不会影响原始的 state</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 该函数接收到的是一个普通的数字</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 并且无法追踪 state.count 的变化</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 我们必须传入整个对象以保持响应性</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">callSomeFunction</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(state.count)</span></span></code></pre></div></div></details>


## 什么是动态组件？如何使用它？

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">动态组件是 Vue 提供的一种机制，允许我们根据条件动态切换渲染的组件，而不需要手动修改模板。 在Vue中，我们可以通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component&gt;</code><span>&nbsp;</span>标签的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">:is</code><span>&nbsp;</span>属性指定需要渲染的组件：</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- 动态渲染组件 --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">component</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :is</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">component</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- 控制组件切换 --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent = 'ComponentA'"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;显示组件A&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent = 'ComponentB'"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;显示组件B&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> ComponentA </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './ComponentA.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> ComponentB </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './ComponentB.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 当前显示的组件</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> currentComponent</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'ComponentA'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component&gt;</code><span>&nbsp;</span>标签的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">:is</code><span>&nbsp;</span>属性值可以是：</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">被注册的组件名</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">导入的组件对象</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">一般的 HTML 元素</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">当使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component :is="..."&gt;</code><span>&nbsp;</span>来在多个组件间作切换时，被切换掉的组件会被卸载。如果需要保留动态组件状态，使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;KeepAlive&gt;</code><span>&nbsp;</span>组件即可。</p></details>


## 什么是 slot ，有什么应用场景？

slot 是 Vue 中的一种用于 组件内容分发 的机制。它允许父组件向子组件插入内容，从而使组件更加灵活和可复用。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在Vue中，插槽的使用方式可以分为四种：<strong style="box-sizing: border-box; font-weight: 600;">默认插槽</strong>、<strong style="box-sizing: border-box; font-weight: 600;">具名插槽</strong>、<strong style="box-sizing: border-box; font-weight: 600;">条件插槽</strong>和<strong style="box-sizing: border-box; font-weight: 600;">作用域插槽</strong>。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">默认插槽</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">默认插槽是最简单的插槽形式，它允许我们将组件的内容传递到组件内部的一个占位符中。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">子组件<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我是子组件的标题&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">父组件</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;这是插槽内容，由父组件传入&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">输出结果：</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我是子组件的标题&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;这是插槽内容，由父组件传入&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">具名插槽</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">当子组件需要多个插槽时，可以为插槽命名，并由父组件指定内容放置到哪个插槽。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">子组件<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"header"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;默认标题&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;默认内容&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"footer"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;默认页脚&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">父组件</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">:</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">header</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成头部&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- 隐式的默认插槽 --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成身体&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">:</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">footer</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成尾部&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">输出结果：</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成头部&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成身体&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;我来组成尾部&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-slot</code><span>&nbsp;</span>有对应的简写<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">#</code><span>&nbsp;</span>，因此<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;template v-slot:header&gt;</code><span>&nbsp;</span>可以简写为<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;template #header&gt;</code><span>&nbsp;</span>。其意思就是“将这部分模板片段传入子组件的 header 插槽中”。</p></blockquote><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">条件插槽</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">我们可以根据插槽是否存在来渲染某些内容:</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">子组件<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.header"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-header"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"header"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.default"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-content"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.footer"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-footer"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"footer"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">作用域插槽</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">作用域插槽可以让子组件在渲染时将一部分数据提供给插槽，从而实现父组件的插槽访问到子组件的状态。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">子组件<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- 定义作用域插槽，并将 items 数据传递给父组件 --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :items</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"items"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 定义数据 items</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> items</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'华为'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'小米'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'苹果'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: -8px 0px 8px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- 使用作用域插槽，接收子组件传递的 items 数据 --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> #</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">{ items }</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-for</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"(item, index) in items"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :key</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"index"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">        {{ item }}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> MyComponent </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './MyComponent.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">输出结果：</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;华为&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;小米&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;苹果&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">Vue官方API：<span>&nbsp;</span><a href="https://cn.vuejs.org/guide/components/slots.html#scoped-slots" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">插槽 Slots</a></p></blockquote><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">应用场景</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡灵活的组件内容插入： 插槽允许我我们将内容插入组件中，而无需修改子组件内部逻辑，极大提高了组件的灵活性。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡构建通用组件： 比如开发卡片、模态框、列表等组件，使用插槽可以轻松实现内容的自定义。模态框组件可通过插槽自定义标题、正文和按钮。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡减少重复代码： 通过插槽，将公共逻辑封装到子组件中，而在父组件中只需插入变化的内容。</p></div></details>


## 🚀Vue 项目可做哪些性能优化？

🔍在 Vue 项目中，我们可以利用 Vue 特有的功能和机制实现性能优化。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">模板和指令优化</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">合理的使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-show</code><span>&nbsp;</span>指令，避免不必要的渲染。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>时，尽量提供唯一的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">key</code><span>&nbsp;</span>，避免重复渲染。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-once</code><span>&nbsp;</span>指令，只渲染一次，避免不必要的计算。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-memo</code><span>&nbsp;</span>指令，对使用<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code>生成的列表进行渲染优化。<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">(vue3.2新增)</code></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">2️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">组件优化</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">合理使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">keep-alive</code><span>&nbsp;</span>组件，缓存组件实例，避免重复渲染。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">使用异步组件加载，减少首屏加载时间。</li></ul><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> AsyncComponent</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineAsyncComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'./MyComponent.vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">))</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">配合 Vue Router 使用路由懒加载，实现路由页面按需加载。</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">合理划分组件，提升复用性和渲染性能。</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3️⃣<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">响应式优化</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Object.freeze</code><span>&nbsp;</span>冻结对象，避免不必要的响应式。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">使用 stop 停止 不必要的watchEffect副作用执行，以减少性能消耗。</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">watch的优化</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡 避免滥用深度监听，降低性能开销。</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡 对于频繁触发的响应式数据变化，可以通过防抖和节流优化监听逻辑。</p></li></ul><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { debounce } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'lodash'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> searchQuery,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  debounce</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newQuery</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    fetchSearchResults</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(newQuery)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">300</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡 可以通过返回函数只监听具体的依赖，减少不必要的触发。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.name, () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.age], ([</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newName</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newAge</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">]) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  //...</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡 当监听器在某些条件下不再需要时，可以通过返回的 stop 方法手动停止监听，以节省资源</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> stop</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> data.value,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newValue</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (newValue </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'done'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      stop</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 停止监听</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">💡 当多个监听器的回调逻辑类似时，可以合并监听</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.name, () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.age], ([</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newName</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newAge</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">]) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  //...</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div></details>


## 什么是 nextTick 如何应用它

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在 Vue.js 中，<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">nextTick</code><span>&nbsp;</span>是一个核心工具方法，用于处理 DOM 更新时机问题。它的核心作用是：<strong style="box-sizing: border-box; font-weight: 600;">在下次 DOM 更新循环结束后执行回调，确保我们能操作到最新的 DOM 状态。</strong><span>&nbsp;</span>它的使用场景如下：</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">数据变化后操作 DOM</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">async</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // DOM 还未更新</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(document.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getElementById</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">).textContent) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 0</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  await</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // DOM 此时已经更新</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(document.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getElementById</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">).textContent) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 1</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> id</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;{{ count }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">在生命周期钩子中操作 DOM</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref, onMounted, nextTick } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 创建 DOM 引用</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> element</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">onMounted</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // 直接访问可能未渲染完成</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(element.value.offsetHeight) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 0 或未定义</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // 使用 nextTick 确保 DOM 已渲染</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(element.value.offsetHeight) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 实际高度</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  })</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">注意，在vue2中和vue3的选项式 API中，我们使用this.$nextTick(callback)的方式调用。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">$nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$refs.text.innerText) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// "更新后的文本"</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div></details>


## 使用 Vue3 Composable 组合式函数，实现 useCount

TIP

在 Vue 应用的概念中，“**组合式函数**”(Composables) 是一个利用 Vue 的组合式 API 来封装和复用有状态逻辑的函数。它和自定义 `React hooks` 非常相似。

使用组合式函数实现如下需求：useCount 是一个计数逻辑管理的组合式函数，它返回一个 `count` 变量和增加、减少、重置count的方法。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 实现 useCount 组合式函数</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> increment</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> decrement</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">--</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reset</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 0</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    increment,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    decrement,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    reset,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 使用 useCount 组合式函数</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">count</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">decrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">reset</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;计数器: {{ count }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;增加&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"decrement"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;减少&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"reset"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;重置&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div></details>


## 使用 Vue3 Composable 组合式函数，实现 useRequest



```
const { loading, data, error } = useRequest(url) // 可只考虑 get 请求
```

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><div class="language-ts vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { ref, computed } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> axios </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'axios'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 实现 useRequest 组合式函数</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useRequest</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">url</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> loading</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 请求状态</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> data</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 响应数据</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> error</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 错误信息</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> fetchData</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> async</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    loading.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> true</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    error.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    try</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> response</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> await</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> axios.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">get</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(url); </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">/</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      data.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> response.data;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">catch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (err) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      error.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> err.message </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">||</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> '请求失败'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">/</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">finally</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      loading.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  };</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // 自动触发请求</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  fetchData</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">();</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    loading,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    data,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    error,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  };</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> useRequest;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">使用</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> useRequest </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './useRequest'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> url</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'https://www.mianshipai.com/'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">loading</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">data</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useRequest</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(url)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;请求数据&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"loading"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;加载中...&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-else-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"error"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;{{ error }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;{{ data }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div></details>


## 自定义组件如何实现 v-model

`v-model` 可以在组件上使用以实现双向绑定。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在vue2中，自定义组件使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>，需要在组件内部定义<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">value</code><span>&nbsp;</span>prop，然后通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$emit('input', newValue)</code><span>&nbsp;</span>触发更新即可。</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- CustomInput.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :value</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"value"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @input</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$emit('input', $event.target.value)"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  props: [</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'value'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">],</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">使用方式：</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">CustomInput</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">searchText</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div></details>


<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">与vue2类似，vue3自定义组件使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>，需要在组件内部定义<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">modelValue</code><span>&nbsp;</span>prop，然后通过<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">emit('update:modelValue', newValue)</code><span>&nbsp;</span>触发更新</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- CustomInput.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :value</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"modelValue"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @input</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$emit('update:modelValue', $event.target.value)"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">defineProps</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'modelValue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">defineEmits</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'update:modelValue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">使用方式：</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">CustomInput</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">searchText</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div><hr style="box-sizing: border-box; margin: 16px 0px; border-right: none; border-bottom: none; border-left: none; border-image: initial; border-top: 0.8px solid rgb(226, 226, 227);"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">👉注意，从 Vue 3.4 开始，官方推荐的实现方式是使用 defineModel() 宏：</strong></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- Child.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> model</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineModel</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> update</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  model.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;父组件的 v-model 值为: {{ model }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"update"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Increment&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">父组件使用 v-model 绑定一个值：</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- Parent.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">Child</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">countModel</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">defineModel</code><span>&nbsp;</span>是一个便利宏，其返回的值是一个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>。它可以像其他<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>一样被访问以及修改，不过它能起到在父组件和当前变量之间的双向绑定的作用：</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">它的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">.value</code><span>&nbsp;</span>和父组件的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>的值同步；</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">当它被子组件变更了，会触发父组件绑定的值一起更新。 根据<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">defineModel</code><span>&nbsp;</span>的特性，我们可以用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>把这个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>绑定到一个原生<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">input</code><span>&nbsp;</span>元素上：</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> model</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineModel</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"model"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">此外，v-model 可以接受自定义参数、添加修饰符，组件也可以绑定多个 v-model ，具体用法请参考 官网文档：<a href="https://cn.vuejs.org/guide/components/v-model" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">组件 v-model</a></p></blockquote></details>


## 如何统一监听 Vue 组件报错

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在 Vue 3 中，可以通过 全局错误处理器<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">（errorHandler）</code><span>&nbsp;</span>和 生命周期钩子（例如<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">onErrorCaptured</code><span>&nbsp;</span>）来统一监听和处理组件中的错误。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">通过全局错误处理器<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">app.config.errorHandler</code></strong></li></ul><div class="language-TypeScript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { createApp } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> app</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createApp</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(App);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 设置全局错误处理器</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">app.config.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">errorHandler</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">err</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">instance</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">info</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'捕获到组件错误: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, err);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'发生错误的组件实例: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, instance);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'错误信息: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, info);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">};</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">app.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">mount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'#app'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">);</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">局部错误捕获（onErrorCaptured）</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">onErrorCaptured</code><span>&nbsp;</span>钩子可以捕获后代组件传递过程中的错误信息</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { onErrorCaptured } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">onErrorCaptured</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">err</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">instance</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">info</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'局部捕获到错误: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, err)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'错误来源组件: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, instance)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'错误信息: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, info)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // 这个钩子可以通过返回 false 来阻止错误继续向上传递。</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> false</span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;"> // 如果需要让错误冒泡到全局，省略或返回 true</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;局部错误捕获示例&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ErrorProneComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">Vue官方API：<span>&nbsp;</span><a href="https://cn.vuejs.org/api/composition-api-lifecycle.html#onerrorcaptured" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">onErrorCaptured</a>、<a href="https://cn.vuejs.org/api/application.html#app-config-errorhandler" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">errorHandler</a></p></blockquote></details>


## Vuex 中 mutation 和 action 有什么区别？

在 Vuex 中， `mutation` 和 `action` 是用于管理状态的两种核心概念。

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mutation</code><span>&nbsp;</span>可以直接修改<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">store</code><span>&nbsp;</span>中的<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">state</strong>值，它只支持同步操作。<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Action</code><span>&nbsp;</span>不能直接修改<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">state</strong>，而是通过调用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mutation</code><span>&nbsp;</span>来间接修改，它用于处理异步操作。</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 定义状态</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Mutation 示例（同步）</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">+=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> payload</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 组件中调用</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">5</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: -8px 0px 8px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 定义状态</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Mutation：同步修改状态</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">+=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> payload</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Action：异步操作，延迟1秒后调用 mutation</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({ </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> }, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">        commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, payload) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 提交 mutation 修改状态</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      }, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 组件中调用</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'asyncIncrement'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">5</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">总结：</strong></p><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">特性</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">Mutation</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">Action</th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">是否同步</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">✅ 同步</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">⏳ 异步（也可以处理同步）</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">是否直接修改 state</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">✅ 直接修改</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">❌ 通过调用 mutation 修改</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">调用方式</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">commit('mutationName')</code></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">dispatch('actionName')</code></td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">适用场景</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">简单的状态修改</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">异步操作（如 API 调用）</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">调试支持</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">完全支持，易于追踪</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">依赖于 mutation 的日志</td></tr></tbody></table><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">⚠️ 为什么要有这样的区分？</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">数据可预测性：通过强制<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Mutation</code><span>&nbsp;</span>同步修改<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">State</strong>，使得状态变更可追踪</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">调试友好性：DevTools 可以准确捕捉每次状态快照</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">代码组织：将同步逻辑与异步逻辑分离，提高代码可维护性</li></ul></div></details>


参考文章：[VueX用法快速回顾](https://juejin.cn/post/7249033891809329212)

## Vuex 和 Pinia 有什么区别？

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Pinia</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Vuex</code><span>&nbsp;</span>都是 Vue 的专属状态管理库，允许用户跨组件或页面共享状态。</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">区别</strong></li></ul><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">特性</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><strong style="box-sizing: border-box; font-weight: 600;">Vuex</strong></th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><strong style="box-sizing: border-box; font-weight: 600;">Pinia</strong></th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">版本支持</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">Vue 2 和 Vue 3</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">仅支持 Vue 3（基于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Composition API</code><span>&nbsp;</span>）</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">API 风格</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">基于传统的对象式 API</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">基于 Composition API，类似于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup</code><br style="box-sizing: border-box;">语法</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">模块管理</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">支持模块化（modules），但语法较复杂</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">模块化简单，<strong style="box-sizing: border-box; font-weight: 600;">每个 store 就是一个独立模块</strong></td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">TypeScript 支持</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code><span>&nbsp;</span>支持不完善，需手动定义类型</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">开箱即用的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code><span>&nbsp;</span>支持，类型推导更强大</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">性能</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">更适合大型项目，但冗余代码较多</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">更加轻量，性能更好，支持按需加载</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">状态持久化</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">需要额外插件</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">插件系统更加灵活，支持状态持久化插件</td></tr></tbody></table><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">代码对比</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">📝<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">vuex</strong></p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// store.js</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { createStore } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vuex'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">({ </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> }) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">        commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      }, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  getters: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> store</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">vue组件中使用</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // 计算属性</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  computed: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    count</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.state.count</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.getters.doubleCount</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  methods: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // 同步增加</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // 异步增加</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'asyncIncrement'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">}</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">📝<strong style="box-sizing: border-box; font-weight: 600;">Pinia</strong></p><div class="language-typescript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// store.js</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { defineStore } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'pinia'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> useCounterStore</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> ({</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }),</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    async</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">        this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      }, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  getters: {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  },</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">组件中使用：</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> { useCounterStore } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './store'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> counter</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCounterStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Count的计算值 {{ counter.count }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Double的计算值 {{ counter.doubleCount }}&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter.increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;同步增加&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter.asyncIncrement"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;异步增加&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">如何选择？</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">对于vue3项目，官方推荐使用pinia。因为它<strong style="box-sizing: border-box; font-weight: 600;">更轻量、TypeScript 支持更好、模块化更简单且拥有更强的 DevTools 支持</strong>。</p></details>


## Vue-router 导航守卫能用来做什么？

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">vue Router</code><span>&nbsp;</span>的<strong style="box-sizing: border-box; font-weight: 600;">导航守卫</strong>用于在路由跳转过程中对导航行为进行<strong style="box-sizing: border-box; font-weight: 600;">拦截</strong>和<strong style="box-sizing: border-box; font-weight: 600;">控制</strong>。这些守卫在路由进入、离开或更新时执行，可以用于多种场景，确保应用的导航逻辑符合预期。以下是常见的用途：</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">认证和授权</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">用于检查用户的登录状态或权限，防止未授权用户访问受限页面。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> isAuthenticated</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> !!</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">localStorage.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getItem</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'token'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (to.meta.requiresAuth </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">&amp;&amp;</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> !</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">isAuthenticated) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'/login'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 未登录，跳转到登录页</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 已登录，正常导航</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">数据预加载</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在进入路由前预加载必要的数据，确保页面渲染时数据已准备好。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">async</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (to.name </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'userInfo'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    await</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'fetchUserData'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 预加载用户数据</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">动态修改页面标题</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">根据路由信息动态更改浏览器标签页的标题，提升用户体验。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  document.title </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> to.meta.title </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">||</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> '自定义标题'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">动画和加载效果</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在路由切换时展示加载动画或过渡效果，提升用户体验。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'setLoading'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">true</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 开始加载动画</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'setLoading'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 结束加载动画</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">日志记录和分析</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">在路由切换时记录用户行为，用于分析或调试。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`用户从 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">fullPath</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">} 跳转到 ${</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">to</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">fullPath</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">}`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">防止访问不存在的页面</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">通过守卫检查路由是否存在，避免导航到无效页面。</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> routeExists</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getRoutes</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">().</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">some</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">route</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> route.name </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> to.name)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">!</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">routeExists) {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'/404'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 跳转到 404 页面</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  } </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> {</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  }</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">})</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">关联文章：<a href="https://juejin.cn/post/7359084604663840820" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">5min带你快速回顾、学习VueRouter的使用！</a></p></details>




基本了解了 `createApp()` 与 `app.mount()` 两个方法的来源和大致执行过程，这里依然以上文的流程图来进行回顾：

![createApp 过程回顾](https://segmentfault.com/img/remote/1460000043640783)

所以在创建好应用 app 后执行 `mount` 函数，通过 `createVNode` 将我们的入口组件 `App.vue` 转换成 `VNode` 树，最后使用 `patch()` 函数将 `VNode` 树转换为真实 Dom 渲染到页面上。

而 Vue 3 的 diff 算法，与 Vue 2 一样，依然在 `patch` 过程中。

那么首先，先来看一下 VNode 的生成吧~

## createVNode - 生成虚拟节点

`createVNode`，即创建一个 `VNode` 虚拟节点对象。

它最多接收 5 个参数（当然在 `createApp` 的时候只有一个 `App.vue`），其中 `type` 可以是一个字符串，也可以是一个 `class` 组件或者普通组件，甚至可以是一个 `VNode` 对象。

所以首先会对 `type` 进行处理，在没有传入 `type` 或者指定为 `v-ndc` 时，会自动转成 **注释节点** 类型，然后判断是否已经是一个 `VNode` 对象；如果是的话，则返回对传入 `VNode` 的拷贝对象（除了部分属性之外，其他属性都是浅层拷贝）。

如果不是一个 `VNode` 的话，则进入后续循环（`App.vue` 就不是）。

之后的过程会先处理组件的 `class` 和 `style` 绑定格式，然后处理传入 `type` 参数对应的 `VNode` 对象类型，最后通过 `createBaseVNode()` 创建 `VNode` 返回。

![image-20230324170019456](https://segmentfault.com/img/remote/1460000043640784)

然后，`mount` 函数内部会通过 `render` 函数进行 `VNode` 到真实 `dom` 的解析和渲染。

而 `render` 函数内部则是根据是否有新的 `VNode` 对象来确认是 **挂载/更新** 还是 **卸载 dom 节点** —— 如果有新的 `VNode` 对象，则调用 `patch` 进行 `VNode` 的解析与渲染；否则调用 `unmount` 进行卸载。

## patch 函数 - VNode 节点的分类处理

在 Vue 项目的开发过程中，我们都知道 **组件与 HTML 元素都是通过标签在模板中使用的**，并且除了元素与组件之外，可能还有注释节点等内容。所以在解析的时候也需要 **根据不同的节点类型进行分类处理**。

所以 `patch` 函数的主要功能就是 **根据 `VNode` 对象的不同类型调用对应的处理方法，如果有绑定 `ref` 属性，则还会将绑定的 `ref` 元素（dom 节点或者组件实例）添加到当前的 Vue 实例上**。

整个 `patch` 过程包括以下几步：

1. 判断新旧 `VNode` 对象是否完全一致，一致时直接退出
2. 如果新旧 `VNode` 对象的 **类型不一致**，则 **卸载旧节点，将旧节点置为 `null` 进行后续逻辑**
3. 根据新节点的 `patchFlag` 配置是否需要优化
4. 根据新节点的 `type` 类型，调用不同的处理方法；这里大部分方法名都是以 `process` 开头，意为加工、处理对应元素
5. 如果设置了 `ref` 属性，则调用 `setRef` 处理对应绑定关系

过程图如下：

![image-20230327170534619](https://segmentfault.com/img/remote/1460000043640785)

## processFunctions - 节点实际处理过程

在 `patch` 过程中根据不同的 `VNode.type` 进行处理之后，分别会调用不同的函数来进行虚拟节点的实际处理与 dom 更新。其中有类似文本与注释这样的简单节点，也有具有多个子元素或者动态组件等这样的复杂标签，那么从易到难，先从简单的标签说起。

### processText 与 processCommentNode

```javascript
const processText = (oldVnode, newVnode, container, anchor) => {
  if(!oldVnode) {
    hostInsert(newVnode.el = hostCreateText(newVnode.children), container, anchor)
  } else {
    const el = (newVnode.el = newVnode.el!)
    if (newVnode.children !== oldVnode.children) {
      hostSetText(el, newVnode.children)
    }
  }
}
const processCommentNode = (oldVnode, newVnode, container, anchor) => {
  if(!oldVnode) {
    hostInsert(newVnode.el = hostCreateComment(newVnode.children), container, anchor)
  } else {
    newVnode.el = oldVnode.el
  }
}
```

纯文本节点很好理解，不存在旧内容时就在父级节点（`container`）中插入节点的文本内容，存在旧节点则首先比较值是否相等，不等就更新。

而注释节点与纯文本不同的是，在更新的时候会直接更新 `el` 属性。

### mountStaticNode - 挂载静态节点

如果是 **开发环境**，内容更新时还会用 `patchStaticNode` 来进行更新，但是 **生产环境下只会在原节点被销毁之后才会进行挂载**，也就是在 Vue 3 中提到的 **静态提升**，用来进行性能优化。

非开发环境下，只有以下逻辑：

```javascript
case Static:
  if (oldVnode == null) {
    mountStaticNode(newVnode, container, anchor, isSVG)
  }

// ...

const mountStaticNode = (n2, container, anchor, isSVG) => {
  [n2.el, n2.anchor] = hostInsertStaticContent!(
    n2.children,
    container,
    anchor,
    isSVG,
    n2.el,
    n2.anchor
  )
}
```

即直接将这个节点的内容插入到父级元素的指定位置下。

> 根据官方给出的 demo，大部分 `template` 中的内容都会编译为 `StaticNode`，例如：
>
> ![image-20230327205649220](https://segmentfault.com/img/remote/1460000043640786)

### processFragment - 多根节点处理

在 Vue 2 中，每个单文件组件下只能有一个根节点，而 Vue 3 中做了改进，我们可以在单个组件的模板中直接添加多个根节点标签（jsx 写法依然只能有一个根节点，因为需要符合 jsx 规范）。

在我们通过 `create-vite` 脚手架创建的项目中，`App.vue` 就是一个多根节点组件，此时就会进入到该函数逻辑中。

![image-20230327231249151](https://segmentfault.com/img/remote/1460000043640787)

#### 1、 首次渲染

**多根节点在首次渲染时逻辑较为简单**，大致如下：

```javascript
const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG,
  slotScopeIds, optimized) => {
  const fragmentStartAnchor = (n2.el = n1 ? n1.el : hostCreateText(''));
  const fragmentEndAnchor = (n2.anchor = n1 ? n1.anchor : hostCreateText(''));
  let {
      patchFlag,
      dynamicChildren,
      slotScopeIds: fragmentSlotScopeIds
  } = n2;
  if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ?
          slotScopeIds.concat(fragmentSlotScopeIds) :
          fragmentSlotScopeIds;
  }
  if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense,
          isSVG, slotScopeIds, optimized);
  }
}
```

首次渲染与更新都有共同逻辑，即 **设置多根节点组件的开始与终止锚点，然后将组件的每个根节点按顺序向中间插入**。

因为 `App.vue` 中的内容方便解析，我们新增一个多根组件 `FragmentOne`，内容如下：

```html
<template>
  <div class="fragment-1">
    <h1>{{ name }} Page</h1>
  </div>
  <div class="fragment-2">
    <h1>Fragment Page</h1>
  </div>
  <div class="fragment-3">
    <h1>Fragment Page</h1>
  </div>
</template>

<script lang="ts" setup>
import {ref} from 'vue'
const name = ref<string | undefined>('FragmentOne')
</script>
```

当这个组件被解析到时，它会被编译成以下内容：

![image-20230327232159199](https://segmentfault.com/img/remote/1460000043640788)

其中 `children` 数组中就是每一个根节点，然后在处理锚点时，因为是首次渲染，两个锚点会直接设置为两个空文本节点：

![image-20230327232404236](https://segmentfault.com/img/remote/1460000043640789)

最后，会通过 `mountChildren` 方法遍历 `children` 数组，依次执行 `patch()` 处理每一个子元素。

#### 2、 派发更新

多根组件的更新相比首次挂载要 **复杂很多**，会根据 **所有根节点的稳定性** 来分开处理。

> 这里的稳定性指的是每个节点是否有 `key`，顺序是否不变等，一般情况下是 **非直接 `v-for` 创建的多根节点，顺序与个数都不会改变，但是每个节点内部可能会发生改变**，例如 `create-vite` 创建的项目中的 `App.vue`；当是稳定节点时，`patchFlag` 的值等于 64

大致代码如下：

```autoit
if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && n1.dynamicChildren) {
    patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);
    if (parentComponent && parentComponent.type.__hmrId) {
        traverseStaticChildren(n1, n2);
    } else if (n2.key != null || (parentComponent && n2 === parentComponent.subTree)) {
        traverseStaticChildren(n1, n2, true);
    }
} else {
    patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
}
```

这里有两种情况：

1. 是稳定节点但是具有动态节点（`v-for`循环等），通过 `patchBlockChildren` 单独处理动态节点；然后通过 `traverseStaticChildren` 进行所有子节点的 `el` 属性处理
2. 不是稳定节点，则通过 `patchChildren` 来对比和更新每个子节点

> `patchChildren` 最终就会进入 Vue 3 的核心 `diff` 过程 —— `patchKeyedChildren`。

![image-20230328160349044](https://segmentfault.com/img/remote/1460000043640790)

### Teleport.process & Suspense.process

在处理 **普通dom元素 `Element` 与Vue组件 `Component`** 的渲染之前，我们先来了解一下 Vue 3 新增的 `teleport` 传送组件和 `suspense` 异步组件吧。

在上面的 `patch` 函数中，`Teleport` 和 `Suspense` 在 `createVNode` 阶段，会生成 **相对特殊的 `VNode` 对象**，在 `process` 过程中，直接调用 `Vnode` 的 `process()` 方法。

> 这两个方法都接收一个 `internals` 参数，包含 `renderer.ts` 中定义的一系列挂载与更新的方法
>
> ```yaml
> const internals = {
>  p: patch,
>  um: unmount,
>  m: move,
>  r: remove,
>  mt: mountComponent,
>  mc: mountChildren,
>  pc: patchChildren,
>  pbc: patchBlockChildren,
>  n: getNextHostNode,
>  o: options
> }
> ```

#### 1、 Teleport

作为新增组件，它的作用是 **将组件内部的内容挂载到指定元素下**，所以它在挂载和更新时需要单独处理。

而内部的逻辑与 `fragment` 有点儿类似：

1. **首次渲染**

与 `fragment` 一样需要先设置锚点，然后根据 `to` 属性查找指定挂载元素 `target`。

如果 `target` 存在则将锚点插入进去，然后根据 `disabled` 配置来确认挂载对象，通过 `mountChildren` 将内容插入进目标元素中。

1. **派发更新**

在更新时，一样会读取 `disabled` 和 `to` 两个属性的配置，但是首先会与 `fragment` 一样根据内部的动态节点等进行子节点内容先进行更新。

然后判断 `disabled` 和 `to` 是否有变化，如果有变化则会通过 `moveTeleport` 对组件内部的内容进行移动。

最后通过 `updateCssVars` 更新 `data-v` 属性，处理 `css` 变量和作用域等。

大致过程如下：

![image-20230329164519592](https://segmentfault.com/img/remote/1460000043640791)

> 图中对 `patchChildren` 进行了省略，与上面 `processFragment` 的方法是一样的。

#### 2、 Suspense

Vue 3 文档中提示的是这是一项 **实验性功能**，用来批量管理异步组件树（感觉有点儿类似于 `Promise.all()`）。

所以它的场景会有两种：加载中与加载结束。`Suspense` 提供两个插槽：`default` 和 `fallback`，其中 `fallback` 用来显示加载中状态，当加载结束后，会卸载 `pending` 状态的 `fallback` 内容然后加载异步组件的结果（也就是 `default` 插槽内的内容）。并且只有当 `default` 插槽内的 **根节点发生改变时**，才会重新触发加载中状态。

所以它的处理过程就是 **首次解析时会重新创建 `default` 与 `fallback` 两个插槽中的节点信息，然后根据 `default` 插槽中的内容加载状态，来确定当前是否需要更新，并且会抛出相应的事件**。

> 这个看起来有点儿复杂，以后再详细的解析吧~

### processComponent 组件处理

对 `Component` 自定义 Vue 组件的处理，同样会区分 `n1 == null` 的情况来确认是挂载还是更新；Vue 中内置的 `KeepAlive、Translation` 等组件也一样会在这里进行处理。

如果是 `KeepAlive` 组件中包装的组件，会设置标志位 `shapeFlag` 为 `ShapeFlags.COMPONENT_KEPT_ALIVE（1 << 9 = 512）`，因为 `KeepAlive` 中的组件会被缓存，如果再次切换的话，需要恢复缓存状态，所以在组件重新 **挂载** 时会执行另外的逻辑 `parent.ctx.activate()`；非 `KeepAlive` 包裹的组件则直接调用 `mountComponent` 执行组件挂载。

而组件 **更新** 时，则只需要直接调用 `updateComponent` 更新组件内容。

在 `mountComponent` 过程中，会对该组件生成的 `VNode` 进行调整，通过 `createComponentInstance` 方法创建一个 **组件实例** 更新到 `VNode` 对象的 `component` 属性上，最后通过 `setupRenderEffect` 设置一个 `renderEffect`（即将组件的渲染作为副作用函数），进行组件模板中的数据依赖收集，并执行一次副作用函数实现组件的首次渲染（数据更新时就会触发这个 `renderEffect` 再次执行，更新 dom，组件实例一样有一个 `isMounted` 属性用来区分是首次渲染还是更新）。

例如我们上面的例子，有一个多根组件 `FragmentOne`，在引入到 `App.vue` 中进行解析的时候，会对 `FragmentOne` 创建一个 `VNode` 对象，如下图：

![image-20230330141119632](https://segmentfault.com/img/remote/1460000043640792)

> 这个组件因为是直接使用的，所以会直接调用 `mountComponent` 方法。

此时会调用 `createComponentInstance` 为 `VNode` 对象创建一个组件实例：

![image-20230330141457207](https://segmentfault.com/img/remote/1460000043640793)

然后通过 `setupRenderEffect` 创建渲染函数副作用。在这个副作用函数中，它对应的执行函数就是组件的解析与更新函数：`componentUpdateFn`。在 **非SSR** 项目中，会通过 `renderComponentRoot(instance)` 对组件内容进行解析，得到一个组件内容对应的标准格式子元素 `VNode` 对象—— `subTree`，最后会通过 `patch` 对 `subTree` 进行解析和更新。

> 当然首次挂载的过程中还会对一些属性进行处理，保证后续进行更新时能正常对比。

而在更新阶段，**首先会通过 `shouldUpdateComponent` 比较新旧节点的信息（例如 `props` 参数、`slots` 插槽内容等是否改变）来确定是否需要对该组件进行全量更新**，如果都没改变则直接继承原来的 dom 节点和 `VNode` 对象。

![image-20230330163221643](https://segmentfault.com/img/remote/1460000043640794)

### processElement HTML元素处理

在解析模板生成 `VNode` 的过程中，没有指定节点类型是默认都会设置 `shapeFlag` 为 `ShapeFlags.ELEMENT` （512），也就是原生的 HTML 节点类型；大部分时候，我们所说的 diff 算法核心部分也发生在这个过程中。

与 `processComponent` 类似，`Element` 元素的处理主要也只区分 `oldVnode` （也就是方法中的 `n1`）是否为 `null`，如果是，则代表是首次渲染；如果不是，则代表是对这个节点进行更新。

根据这两种情况，源码中分别定义了两个方法：`mountElement` 挂载节点、`patchElement` 更新节点。

`mountElement` 的过程比较复杂，包含了根节点（这个元素节点）创建、内容（文本还是包含子节点）处理、样式和类名绑定、自定义指令、生命周期监听等。

而 `patchElement` 的过程也同样复杂，除了与 `mount` 阶段一样需要处理样式类名绑定、自定义指令等内容之外，还要比较新旧节点内容进行 `patch` 相关更新函数的处理。

![image-20230330180756383](https://segmentfault.com/img/remote/1460000043640795)

## patchChildren - 两种子节点 Diff 方式

在上面的不同类型的 `VNode` 节点的处理过程中，自定义组件 `Component`、传送组件 `Teleport`、多根节点 `Fragment` 和 原始 HTML 节点 `Element` 在 `patch` 更新过程中，**在处理子节点时** 都有可能会调用 `patchChildren` 来处理子节点的更新。

> 子节点更新的处理方式有两种：`patchBlockChildren` 和 `patchChildren`，其中 `patchBlockChildren` 一般是在 **动态节点 `dynamicChildren`** 确定时调用，内部会直接 **按照新的节点的动态子节点 `dynamicChildren` 数组的长度，遍历子节点数组并通过 `patch` 方法对比旧的子节点数组同位置元素**。
>
> 而 `patchChildren` 则是在节点不存在 `dynamicChildren` 时对所有子节点数组进行全量的对比更新。
>
> _关于 `block` 和 `PatchFlags` 的相关内容，也可以查看 《Vue.js 设计与实现》一书的第十七章第一节：编译优化 - 动态节点收集与补丁标志_。

在 `patchChildren` 过程中，会判断节点的 `patchFlag` 标志位，来确定 **子节点数组是否配置了 `key` 属性**。如果 **存在 key**，则会通过 `patchKeyedChildren` 对 **新旧所有子节点进行 `diff` 处理，详细对比可复用节点并调用 `patch` 进行节点的最小量更新**；而对于 **不存在 key** 的子节点数组，则调用 `patchUnkeyedChildren` 方法 **按照新旧子节点数组中的最小长度，遍历最小长度下 新旧节点同位置的元素调用 `patch` 方法进行对比，遍历结束后在处理剩余节点元素（新的挂载旧的移除）**。

### 1、patchUnkeyedChildren - 无 key 子节点处理

上面说了 `patchUnkeyedChildren` 会按照新旧子节点数组的 **最小长度** 进行遍历，所以首先会获取他们的长度进行对比得到较小的那个 `length`：

```javascript
c1 = c1 || EMPTY_ARR
c2 = c2 || EMPTY_ARR
const oldLength = c1.length
const newLength = c2.length
const commonLength = Math.min(oldLength, newLength)
```

然后通过这个最小长度 `commonLength` 来进行遍历，处理 **新旧数组的同位置的子节点**：

```csharp
let i
for (i = 0; i < commonLength; i++) {
  const nextChild = (c2[i] = optimized
    ? cloneIfMounted(c2[i] as VNode)
    : normalizeVNode(c2[i]))
  patch(c1[i], nextChild, container, ... )
}
```

最后在处理剩余元素，移除旧的添加新的：

```javascript
if (oldLength > newLength) {
  // remove old
  unmountChildren(c1, ... , commonLength)
} else {
  // mount new
  mountChildren(c2, ..., commonLength)
}

const unmountChildren = (children, ... , start = 0) => {
  for (let i = start; i < children.length; i++) {
    unmount(children[i], ...)
  }
}
const mountChildren = (children, container, ... , start = 0) => {
  for (let i = start; i < children.length; i++) {
    const child = (children[i] = optimized
      ? cloneIfMounted(children[i] as VNode)
      : normalizeVNode(children[i]))
    patch(null,child,container, ...)
  }
}
```

> 因为不存在 `key`，所以深入对比新旧节点的变化更加消耗性能，不如直接 **当做位置没有发生改变，直接更新同位置节点**。

### 2、patchKeyedChildren - 核心 Diff 过程

当节点 **具有 `key` 属性时**，节点更新时就会进行我们常说的 diff 过程，核心也就是为了 **dom 节点复用**，把相同 `key` 属性的节点视为同一节点，根据属性的实际变化来更新具体的 dom 属性，以达到最少操作的目的。

在 Vue 2 中，对于这种情况采用的是 **双端对比算法** 来完成 **新旧节点数组的全量对比**，**但是这种方法不是最快的**。

Vue 3 在此基础上，借鉴了 `ivi` 和 `inferno` 两个框架所用到的 **快速 Diff 算法**，并在此基础上进行了扩展，得到了如今源码中使用的 `diff` 算法。

因为源码比较长，我将过程简化后以两个字符串数组进行比较：

```javascript
const list = document.querySelector('#process');

const isSameVNodeType = (n1, n2) => (n1 === n2);
const unmount = (node) => {
  console.log('unmount', node);
};
const patch = (n1, n2) => {
  console.log('patch', n1, n2);
};
const move = (node, anchor) => {
  console.log('move', node, 'anchor', anchor);
};

// https://en.wikipedia.org/wiki/Longest_increasing_subsequence
function getSequence(arr) {
  const p = arr.slice();
  const result = [0];
  let i;let j;let u;let v;let c;
  const len = arr.length;
  for (i = 0;i < len;i++) {
    const arrI = arr[i];
    if (arrI !== 0) {
      j = result[result.length - 1];
      if (arr[j] < arrI) {
        p[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        c = (u + v) >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = result.length;
  v = result[u - 1];
  while (u-- > 0) {
    result[u] = v;
    v = p[v];
  }
  return result;
}


// 正式开始
// 定义新旧节点数据
const c1 = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
const c2 = ['a', 'b', 'e', 'd', 'h', 'f', 'g'];

// 设置初始数据
let i = 0;
const l2 = c2.length;
let e1 = c1.length - 1; // prev ending index
let e2 = l2 - 1; // next ending index

// 1. sync from start
while (i <= e1 && i <= e2) {
  const n1 = c1[i];
  const n2 = c2[i];
  if (isSameVNodeType(n1, n2)) {
    patch(n1, n2);
  } else {
    break;
  }
  i++;
}

// 2. sync from end
while (i <= e1 && i <= e2) {
  const n1 = c1[e1];
  const n2 = c2[e2];
  if (isSameVNodeType(n1, n2)) {
    patch(n1, n2);
  } else {
    break;
  }
  e1--;
  e2--;
}

// 3. common sequence + mount
if (i > e1) {
  if (i <= e2) {
    const nextPos = e2 + 1;
    while (i <= e2) {
      patch(null, c2[i]);
      i++;
    }
  }
}

// 4. common sequence + unmount
else if (i > e2) {
  while (i <= e1) {
    unmount(c1[i]);
    i++;
  }
}

// 5. unknown sequence
else {
  const s1 = i; // prev starting index
  const s2 = i; // next starting index

  // 5.1 build key:index map for newChildren
  const keyToNewIndexMap = new Map();
  for (i = s2;i <= e2;i++) {
    const nextChild = c2[i];
    if (nextChild != null) {
      keyToNewIndexMap.set(nextChild, i);
    }
  }

  // 5.2 loop through old children left to be patched and try to patch
  // matching nodes & remove nodes that are no longer present
  let j;
  let patched = 0;
  const toBePatched = e2 - s2 + 1;
  let moved = false;
  let maxNewIndexSoFar = 0;
  const newIndexToOldIndexMap = new Array(toBePatched);

  for (i = 0;i < toBePatched;i++) {
    newIndexToOldIndexMap[i] = 0;
  }

  for (i = s1;i <= e1;i++) {
    const prevChild = c1[i];
    if (patched >= toBePatched) {
      // all new children have been patched so this can only be a removal
      unmount(prevChild);
      continue;
    }

    let newIndex;
    if (prevChild != null) {
      newIndex = keyToNewIndexMap.get(prevChild);
    } else {
      // key-less node, try to locate a key-less node of the same type
      for (j = s2;j <= e2;j++) {
        if (
          newIndexToOldIndexMap[j - s2] === 0 &&
            isSameVNodeType(prevChild, c2[j])
        ) {
          newIndex = j;
          break;
        }
      }
    }

    if (newIndex === undefined) {
      unmount(prevChild);
    } else {
      newIndexToOldIndexMap[newIndex - s2] = i + 1;
      if (newIndex >= maxNewIndexSoFar) {
        maxNewIndexSoFar = newIndex;
      } else {
        moved = true;
      }
      patch(prevChild, c2[newIndex]);
      patched++;
    }
  }

  // 5.3 move and mount
  const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : [];
  j = increasingNewIndexSequence.length - 1;
  for (i = toBePatched - 1;i >= 0;i--) {
    const nextIndex = s2 + i;
    const nextChild = c2[nextIndex];
    const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1] : null;
    if (newIndexToOldIndexMap[i] === 0) {
      // mount new
      patch(null, nextChild);
    } else if (moved) {
      if (j < 0 || i !== increasingNewIndexSequence[j]) {
        // move(nextChild, container, anchor, MoveType.REORDER)
        move(nextChild, anchor);
      } else {
        j--;
      }
    }
  }
}
```

> 这段代码可以直接在控制台运行，也可以直接查看文章结尾的代码片段（会更新细节问题）。

假设我们有这样的节点变化：

```css
旧节点：['a', 'b', 'c', 'd', 'e', 'f', 'g']

新节点：['a', 'b', 'e', 'd', 'h', 'f', 'g']
```

经过的 diff 过程如下：

![image-20230331161318471](https://segmentfault.com/img/remote/1460000043640796)

其中可以分为以下几个大的步骤：

1. **从头开始、同位置比较**，直到 **遇到 `key` 不一样的节点**（也就是第三位 `c` 和 `e`，此时 `i` = 2）
2. **从尾开始、倒序同位置比较**，直到 **遇到 `key` 不一样的节点或者第一步的停止位 `i`**（也就是遇到倒数第三位 `e` 和 `h`，此时 `e1` 和 `e2` 都等于 4）
3. 经过前两步之后，剩下的节点虽然有相同节点，但是顺序已经改变，所以需要重新处理。这里与 Vue 2 中的 **双端均不相同** 的情况有些类似的过程，都会将一个节点数组转为 `map` 形式然后遍历另一个数组进行匹配和更新。但是这里也一样有一些不同，我们在后面分析时进行详细说明。

> 这里可以发现 **实际执行过程并没有完全匹配代码中的 5 种情况**，这是因为 **三和四这两种情况都是发生在前两步结束后已经有一个节点数组已经全部遍历完毕**。

### 快速 Diff 算法

在分析 diff 算法之前，先了解一下这个 **快速 diff 算法** 的“快速”主要是体现在哪个方面。

根据《Vue.js 设计与实现》的说明：**快速 Diff 算法包含预处理步骤，这其实是借鉴了纯文本 Diff 算法的思路。在纯文本 Diff 算法中，存在对两段文本进行预处理的过程**。

在这个过程中，会 **分别查找头部完全一致的内容与尾部完全一致的内容，将其排除后再比较剩余内容**。

例如：

![image-20230331165142312](https://segmentfault.com/img/remote/1460000043640797)

两段文本中只需要更新的仅仅只有中间部分，需要将 `vue` 改为 `react`。

*接下来，我们以这个例子进行整个 diff 过程的解析~*

### 1、 从头查找最长相同 key 节点

我们假设现在有这样的内容：

![image-20230331170334019](https://segmentfault.com/img/remote/1460000043640798)

它在第一步结束后，更新到了第二个节点；`i` 会停留在第一个不同的节点位置。

![image-20230331172031058](https://segmentfault.com/img/remote/1460000043640799)

此时剩余内容为：

```css
旧节点： ['c', 'd', 'e', 'f', 'g'];
新节点： ['e', 'd', 'h', 'f', 'g'];
```

### 2、 从尾部倒序查找最长相同 key 节点

在第二步结束之后，会进行这样的更新：

![image-20230331172957109](https://segmentfault.com/img/remote/1460000043640800)

这一步不会处理 `i` 的位置，而是从两个数组的最末尾节点依次按顺序对比同位置节点：

![image-20230331173102486](https://segmentfault.com/img/remote/1460000043640801)

### 3、 旧节点数组被遍历结束

因为最初的例子中没有触发代码中的第三、四步，所以这里的例子进行一下调整：

```css
旧节点： ['c', 'd', 'e', 'f', 'g'];
新节点： ['c', 'd', 'h', 'j', 'e', 'f', 'g'];
```

此时过程如下：

![image-20230331173641313](https://segmentfault.com/img/remote/1460000043640802)

![image-20230331175221206](https://segmentfault.com/img/remote/1460000043640803)

**也就是对新节点数组剩余元素进行依次遍历和挂载**

### 4、 新节点数组被遍历结束

> 第 三、四、五 三个步骤属于 **互斥情况**，所以源码中采用的是 `if` 判断

因为这三个情况不一样，所以这一步需要对前面的例子再进行修改，假设新示例如下：

```css
旧节点： ['c', 'd', 'h', 'j', 'e', 'f', 'g'];
新节点： ['c', 'd', 'e', 'f', 'g'];
```

此时的步骤就刚好与第三步相反：

![image-20230331180836302](https://segmentfault.com/img/remote/1460000043640804)

![image-20230331180324169](https://segmentfault.com/img/remote/1460000043640805)

**也就是对旧节点数组剩余元素进行依次遍历和卸载**

### 5、 剩余节点对比（移动、更新、卸载）

> 只有在这一步才用到了 **最长递增子序列** 算法。

在这一步开始之前，我们先了解一下什么是 **最长递增子序列算法**。

#### 5.0 最长递增子序列

> "**在一个给定的数值序列中，找到一个子序列，使得这个子序列元素的数值依次递增，并且这个子序列的长度尽可能地大。最长递增子序列中的元素在原序列中不一定是连续的**"。
>
> —— 维基百科

对于以下的原始序列

```undefined
0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15
```

最长递增子序列为：

值得注意的是，生成的递增子序列数组中的元素，在原数组中对应的元素下标不一定是连续的。

![image-20230403093717347](C:/Users/Zhangwenye/Desktop/博客/source/img/3642183937-e1f201ff7c91ad91_fix732.png)

**在 Vue 3 中，这个算法被提取成了一个工具方法 `getSequence`，位于 `renderer.ts` 文件的最底部**。并且，Vue 3 中最这个方法进行了改造，最终生成的子序列 **是以可生成 `最长` 子串数组的可用元素的 `最大索引`**。

如果使用 Vue 3 中的 `getSequence` 方法来处理上面的这个原始序列，会得到这样的结果：

区别如下：

![image-20230403101532141](C:/Users/Zhangwenye/Desktop/博客/source/img/3531219669-039bff1cb42e63a0_fix732.png)

`getSequence` 方法的大致过程如下：

1. 复制一份 `arr` 数组，用于记录每个元素在递增子序列中的前驱元素。
2. 初始化 `result` 数组为 `[0]`，用于记录递增子序列的索引。
3. 遍历 `arr` 数组，如果当前元素不为 0，则在递增子序列 `result` 中查找比当前元素小的最大元素的索引 `j`。
4. 如果 `arr[j] < arr[i]`，则将 `p[i]` 赋值为 `j`，并将 `i` 添加到递增子序列 `result` 中。
5. 否则，使用二分查找在递增子序列 `result` 中查找比当前元素小的最大元素的索引 `u`。
6. 如果 `arr[i]` 小于 `result[u]`，则将 `p[i]` 赋值为 `result[u-1]`。
7. 将 `i` 添加到递增子序列 `result` 中。
8. 通过 `p` 数组回溯递增子序列，生成最终的递增新索引序列。

#### 5.1 新节点剩余元素构建 Map

这一步就很简单了，直接循环 `newChildren` 的 `i` 到 `e2` 之间的剩余元素，组成一个 `key => index` 的 `Map`。

```javascript
const s1 = (s2 = i);

const keyToNewIndexMap = new Map();
for (i = s2;i <= e2;i++) {
  const nextChild = c2[i];
  if (nextChild != null) {
    keyToNewIndexMap.set(nextChild, i);
  }
}
```

#### 5.2 与旧节点的对比复用

在 `newChildren` 的对应关系 `keyToNewIndexMap` 创建好之后，就会遍历 `oldChildren` 对比 `key` 相同的 `VNode` 实例进行复用和更新。

而对于比较结束后依旧剩余的旧节点则直接进行 `unmount` 卸载（因为剩余的旧节点 `key` 都不能复用，所以直接视为废弃节点）。

简化代码如下：

```javascript
let j;
let patched = 0; // 已更新节点数
const toBePatched = e2 - s2 + 1; // newChildren 剩余节点数（需要更新）
let moved = false; // 节点位置是否移动标识
let maxNewIndexSoFar = 0; // 当前元素在新节点数组最大索引
const newIndexToOldIndexMap = new Array(toBePatched); // 新旧节点索引对应关系

for (i = 0;i < toBePatched;i++) {
  newIndexToOldIndexMap[i] = 0;
}

// 遍历旧节点数组
for (i = s1;i <= e1;i++) {
  const prevChild = c1[i]; // 当前旧节点元素
  if (patched >= toBePatched) {
    // 如果以更新节点数大于等于需要更新节点数，
    // 说明新节点以全部更新，剩余旧节点直接移除，并跳出当次循环
    unmount(prevChild);
    continue;
  }

  // 判断当前节点是否有key，存在则在 map 中查找，
  // 不存在则遍历新节点剩余数组的相同节点并更新索引
  let newIndex;
  // 这里是判断 prevChild.key != null
  if (prevChild != null) {
    newIndex = keyToNewIndexMap.get(prevChild);
  } else {
    // key-less node, try to locate a key-less node of the same type
    for (j = s2;j <= e2;j++) {
      if (
        newIndexToOldIndexMap[j - s2] === 0 &&
          isSameVNodeType(prevChild, c2[j])
      ) {
        newIndex = j;
        break;
      }
    }
  }

  if (newIndex === undefined) {
    // 依然没有找到同key或者同 VNodeType的新节点，则卸载旧节点
    unmount(prevChild);
  } else {
    // 找到了对应新节点，对比索引位置设置 moved 标识，执行 patch 更新
    newIndexToOldIndexMap[newIndex - s2] = i + 1;
    if (newIndex >= maxNewIndexSoFar) {
      // 如果新节点的索引大于等于 maxNewIndexSoFar，
      // 则将 maxNewIndexSoFar 更新为新节点的索引
      maxNewIndexSoFar = newIndex;
    } else {
      // 说明向前移动了
      moved = true;
    }
    patch(prevChild, c2[newIndex]);
    patched++; // 已更新 +1
  }
}
```

为了能更加体现整个过程中变化，我们将上面的例子进行一下扩充：

```css
旧节点： ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n'];
新节点： ['a', 'b', 'e', 'd', 'h', 'g', 'f', 'o', 'p', 'r', 'k', 'j', 'l', 'm', 'n'];
```

其中包含了前两步的 **头部相同节点，尾部相同节点**，中间部分也包含了卸载、移动、更新三种情况，并且数据量已经比较大，可以看出整体过程。

在第一步新节点数组索引 `Map` 对象构建结束之后，我们会的得到一个 `size` 为 10 的 `keyToNewIndexMap`，并且此时的 **需要更新节点数标识 `toBePatched` 为 10**（因为都有 `key` 属性，所以此时 `toBePatched = keyToNewIndexMap.size()`）。

然后会遍历旧节点数组查找 `key` 相同的节点的下标 `newIndex`（如果找不到还会在 `newChildren` 新节点的剩余数组中查找 **未被使用过 `newIndexToOldIndexMap[j - s2] === 0` 且同类型判断 `isSameVNodeType` 为 `true` 的节点**，并将它的 `index` 下标作为 `newIndex`）。

这个过程结束后，如果 `newIndex` 依然是 `undefined`，则证明这个节点无法被复用，直接卸载；如果存在的话，则调用 `patch` 对比更新新旧节点元素。

大致过程如下：

![image-20230403131816154](C:/Users/Zhangwenye/Desktop/博客/source/img/3084495202-519becdb323e7aa6_fix732.png)

![image-20230403125139210](C:/Users/Zhangwenye/Desktop/博客/source/img/1660279722-31220b5e1e662a31_fix732.png)

> 此时新节点剩余数组中仍然还有剩余元素没有被挂载，而且节点顺序不对，就需要进行最后一步：新建节点与位置移动

#### 5.3 新建节点与位置移动

在这一步的开始，会判断 `5.2` 结束后的 `moved` 标识，判断是否需要进行移动判定；如果需要的话，会通过 `getSequence` 查找位置更新的最长递增子串的 **元素下标**。

```autoit
const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : [];
j = increasingNewIndexSequence.length - 1;
```

> 这里的 `newIndexToOldIndex` 记录了新节点剩余数组中，每个节点的在旧节点剩余数组中的位置下标，如果不存在记录则为 0。

此时数据如下：

![image-20230403132629995](C:/Users/Zhangwenye/Desktop/博客/source/img/3255277026-e29eed8371329096_fix732.png)

> 这里的最长递增子串下标数组就是 `[1, 4, 9]`，对应的也就是 `newChildren[4], newChildren[6], newChildren[11]`，剩下的元素会根据这三个元素的位置进行插入。

然后，对比新旧节点的索引进行移动或者新增：

```autoit
if (newIndexToOldIndexMap[i] === 0) {
  patch(null, nextChild);
} else if (moved) {
  if (j < 0 || i !== increasingNewIndexSequence[j]) {
    move(nextChild, anchor);
  } else {
    j--;
  }
}
```

整个过程大致为：

1. 获取子节点在新 `VNode` 中的位置 `nextIndex` 和子节点 `VNode` 对象 `nextChild`。
2. 获取子节点的后一个兄弟节点或父节点作为锚点 `anchor`。
3. 如果新旧 `VNode` 中该子节点对应的旧节点的索引为 0，则表示该子节点在旧 `VNode` 中不存在，需要新建该节点并挂载到容器中。
4. 如果该子节点需要移动，则根据增序列和当前遍历的位置 i 的关系来判断是否需要移动，如果需要移动，则调用 `move` 函数来移动该节点到正确的位置。

![image-20230403142758157](C:/Users/Zhangwenye/Desktop/博客/source/img/1470043159-872e87c1beb7489b_fix732.png)

